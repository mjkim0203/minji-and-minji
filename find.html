<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>민지 찾기 - 통합 레이아웃 예제</title>

    <script>
        (function() {
            const choice = localStorage.getItem('userThemeChoice');
            if (choice === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else if (choice === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            } else if (choice === 'auto') {
                document.documentElement.setAttribute('data-theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    <link rel="stylesheet" href="style.css">

    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <script defer src="find.js"></script>

    <style>
        /* find.html 페이지에만 적용될 추가 CSS */
        #video-container {
            position: relative; /* canvas 위치 지정을 위해 */
            width: 100%;
            max-width: 640px; /* 비디오 최대 너비 */
            margin: 20px auto;
            border: 1px solid var(--border-color-light);
            background-color: var(--panel-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column; /* 세로 정렬 */
        }
        #video {
            width: 100%;
            height: auto;
            display: block;
        }
        #overlay-canvas {
            position: absolute; /* 비디오 위에 겹치기 */
            top: 0;
            left: 0;
            z-index: 10;
        }
        #expression-output {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--text-color);
            min-height: 2em; /* 최소 높이로 흔들림 방지 */
            text-align: center;
            padding: 10px;
        }
        /* 로딩 메시지 스타일 */
        #loading-message {
            font-size: 1.1em;
            color: var(--text-color-secondary);
            margin: 20px;
            text-align: center;
        }
    </style>
</head>

<body class="font-standard width-standard">

    <div id="page-wrapper">
        <header id="header">
            <div class="logo">
                <a href="index.html">민지와 민지와 민지와 민지, 그리고 민지</a>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="위키백과 검색" id="search-input">
                <button>검색</button>
            </div>
            <nav class="user-links">
                <a href="find.html">민지를 찾기</a>
                <a href="#">로그인</a>
            </nav>
        </header>

        <div id="main-wrapper">
            
            <nav id="left-sidebar">
                <ul>
                    <li><a href="about.html">소개</a></li>
                    <li><a href="#">최근 바뀜</a></li>
                    <li><a href="#">임의의 문서</a></li>
                    <li><a href="#">기부</a></li>
                </ul>
            </nav>

            <main id="content-area">
                <nav class="tabs">
                    <a href="#" class="active">문서</a>
                    <a href="#">토론</a>
                </nav>

                <h1>민지 찾기</h1>
                <article class="article-body">
                    <p>
                        이곳에서 당신의 얼굴 표정을 감지하여 민지의 마음을 찾아보세요!
                    </p>
                    <p>
                        <span style="color: red; font-weight: bold;">주의:</span> 웹캠 사용 권한을 요청합니다. 권한을 허용해야 기능이 작동합니다.
                    </p>

                    <div id="loading-message">
                        얼굴 인식 모델 로딩 중... 잠시만 기다려주세요.
                    </div>
                    
                    <div id="video-container">
                        <video id="video" width="640" height="480" autoplay muted></video>
                        <canvas id="overlay-canvas"></canvas>
                    </div>
                    
                    <div id="expression-output"></div>

                </article>
            </main>

            <aside id="settings-panel">
                <fieldset>
                    <legend>글</legend>
                    <div>
                        <input type="radio" id="font-small" name="font-size" value="small">
                        <label for="font-small">작음</label>
                    </div>
                    <div>
                        <input type="radio" id="font-standard" name="font-size" value="standard" checked>
                        <label for="font-standard">표준</label>
                    </div>
                    <div>
                        <input type="radio" id="font-large" name="font-size" value="large">
                        <label for="font-large">큼</label>
                    </div>
                </fieldset>
        
                <fieldset>
                    <legend>너비</legend>
                    <div>
                        <input type="radio" id="width-standard" name="layout-width" value="standard" checked>
                        <label for="width-standard">표준</label>
                    </div>
                    <div>
                        <input type="radio" id="width-wide" name="layout-width" value="wide">
                        <label for="width-wide">넓게</label>
                    </div>
                </fieldset>
        
                <fieldset>
                    <legend>색 (베타)</legend>
                    <div>
                        <input type="radio" id="theme-auto" name="theme" value="auto">
                        <label for="theme-auto">자동</label>
                    </div>
                    <div>
                        <input type="radio" id="theme-light" name="theme" value="light" checked>
                        <label for="theme-light">라이트</label>
                    </div>
                    <div>
                        <input type="radio" id="theme-dark" name="theme" value="dark">
                        <label for="theme-dark">다크</label>
                    </div>
                </fieldset>
            </aside>

        </div> </div> </body>
</html>
